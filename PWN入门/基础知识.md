





### ELF文件结构

#### ELF头

必须在文件开头,包含了ELF的magic code,程序运行的计算机架构,程序入口等内容.

可以用readelf -h来读取内容. 一般用来寻找程序入口

#### Section(节)

elf文件由多个节组成,描述节的各种信息的数据统一存放在节头表中.

.text节  存放一个程序运行所需的所有代码

.rdata节  存放静态数据(不可修改),如字符串等

.data节 存放可修改的数据,如C语言中已初始化的全局变量等

.bss节 存放可修改的数据,但是是未被初始化的

.plt节和.got节 程序调用动态链接库(.so文件)中函数时,需要这两个节配合,来获取被调用函数的地址



### Linux下漏洞缓解措施

#### NX

基本规则为可写权限与可执行权限互斥.所以当开启了NX的时候,不能直接使用shellcode执行任意代码,因为能够写入shellcode的地方都是不可执行的.

GCC默认开启NX保护,关闭方法是这编译时加入 -z execstack 参数

#### Stack Canary

专门针对栈溢出设计的保护.

#### ASLR(Address Space Layout Randomization)

将程序的堆栈地址和动态链接库的加载地址进行一定的随机化,

#### PIE

与ASLR类似,目的是让可执行程序ELF的地址进行随机化加载,从而使得程序的内容结构对攻击者完全未知.

#### Full Relro

与linux下的Lazy Binding机制有关,主要作用是禁止.GOT .PLT表和其它一些相关内存的读写,从而阻止攻击者利用这两个表来进行攻击.

























